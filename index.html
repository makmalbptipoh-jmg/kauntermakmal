  <div id="main">
    <article id="intro">
      <h2 class="major">Intro</h2>
      <p><strong>Makmal JMG Ipoh</strong> ialah fasiliti analisis di bawah Bahagian Perkhidmatan Teknikal (BPT) yang menyokong penerokaan sumber mineral, pengurusan geologi, serta keperluan industri dan penyelidikan. Kami menjalankan analisis geokimia dan ujian fizikal ke atas mineral, batuan, tanah, sedimen dan air untuk kawalan kualiti, pematuhan spesifikasi, penilaian sumber dan pembangunan produk.</p>

      <h3>Skop Perkhidmatan</h3>
      <ul>
        <li><strong>Analisis geokimia</strong>: unsur major (SiO2, Al2O3, Fe2O3, CaO, MgO, Na2O, K2O, TiO2), minor atau jejak (Zn, Cu, Pb, Cd, As, Se, Hg, Sb, Mo, W, Be, NiO, CoO, V2O5, ZrO2, Cr2O3) dan parameter khusus (U atau Th) mengikut keperluan.</li>
        <li><strong>Ujian fizikal</strong>: Water Absorption, Particle Size Analysis, Effective Size atau Uniformity Coefficient, Water Soluble Content, Sieve Test, LOI, Organic Matter, Acid Solubility, Clay atau Silt atau Dust, Total Sulphur (SO3 atau SO4), Moisture 105°C, Specific Gravity dan pH.</li>
        <li><strong>Khidmat teknikal</strong>: nasihat kaedah, keperluan persediaan sampel dan interpretasi asas keputusan.</li>
      </ul>

      <h3>Jaminan Kualiti</h3>
      <p>Sistem pengurusan kualiti berasaskan ISO atau IEC 17025:2017 dengan jejak ukur yang terurus, penggunaan bahan piawai atau kawalan dalaman dan semakan teknikal sebelum laporan dikeluarkan.</p>

      <h3>Aliran Kerja</h3>
      <p>Pendaftaran → Persediaan sampel → Analisis → Kawalan kualiti → Laporan dan serahan kepada pelanggan.</p>

      <h3>Penghantaran Sampel</h3>
      <p>Pastikan disertakan nama atau jenis sampel, matriks, senarai ujian, kuantiti atau berat, maklumat keselamatan jika ada dan rujukan projek. Kaunter: <em>Jalan Sultan Azlan Shah, 31400 Ipoh, Perak</em>.</p>
    </article>

    <article id="about">
      <h2 class="major">PERMOHONAN ANALISA</h2>
      <p>Untuk mempercepatkan urusan pendaftaran ujian, sila isi borang dalam talian di pautan berikut. Borang ini membantu kami merekod maklumat sampel dan ujian diminta sebelum penyerahan fizikal di kaunter.</p>
      <p>
        <a class="btn btn-primary" href="https://forms.gle/s5gRpcgkTyNcgxu56" target="_blank" rel="noopener">
          Isi Borang Permohonan Analisa
        </a>
      </p>
    </article>

    <article id="work">
      <h2 class="major">Pasir silika dan keluaran</h2>
      <form id="calcForm" class="calc-wrap" autocomplete="off">
        <p class="calc-hint">Masukkan jumlah sampel dan pilih analisa yang diperlukan.</p>

        <div class="row sample-box" aria-live="polite">
          <label for="sampleCount"><strong>Bilangan Sampel</strong></label>
          <input type="number" id="sampleCount" class="input-compact" value="1" min="1" step="1" inputmode="numeric" />
        </div>

        <div class="calc-list">
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">SiO2 (Pasir)</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Al2O3</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Fe2O3</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">CaO</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">MgO</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Na2O</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">K2O</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">TiO2</span></span><span class="calc-price">RM 70</span></label>

          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">P</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Mn</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">BaO</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">SrO</span></span><span class="calc-price">RM 70</span></label>

          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">NiO</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">CoO</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">V2O5</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">ZrO2</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Zn</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Cu</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Cr2O3</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Sn</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Pb</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Cd</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">As</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Se</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Hg</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Sb</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Mo</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">W</span></span><span class="calc-price">RM 70</span></label>
          <label class="calc-item"><span><input type="checkbox" value="70"><span class="calc-name">Be</span></span><span class="calc-price">RM 70</span></label>

          <label class="calc-item"><span><input type="checkbox" value="100"><span class="calc-name">U (200 g)</span></span><span class="calc-price">RM 100</span></label>
          <label class="calc-item"><span><input type="checkbox" value="100"><span class="calc-name">Th (200 g)</span></span><span class="calc-price">RM 100</span></label>

          <label class="calc-item"><span><input type="checkbox" value="50"><span class="calc-name">Water Absorption</span></span><span class="calc-price">RM 50</span></label>
          <label class="calc-item"><span><input type="checkbox" value="50"><span class="calc-name">Particle Size Analysis</span></span><span class="calc-price">RM 50</span></label>
          <label class="calc-item"><span><input type="checkbox" value="50"><span class="calc-name">Effective Size / Uniformity Coefficient</span></span><span class="calc-price">RM 50</span></label>
          <label class="calc-item"><span><input type="checkbox" value="50"><span class="calc-name">Water Soluble Content</span></span><span class="calc-price">RM 50</span></label>
          <label class="calc-item"><span><input type="checkbox" value="50"><span class="calc-name">Sieve Test</span></span><span class="calc-price">RM 50</span></label>
          <label class="calc-item"><span><input type="checkbox" value="30"><span class="calc-name">LOI pada 900°C</span></span><span class="calc-price">RM 30</span></label>
          <label class="calc-item"><span><input type="checkbox" value="50"><span class="calc-name">Organic Matter</span></span><span class="calc-price">RM 50</span></label>
          <label class="calc-item"><span><input type="checkbox" value="50"><span class="calc-name">Acid Solubility</span></span><span class="calc-price">RM 50</span></label>
          <label class="calc-item"><span><input type="checkbox" value="50"><span class="calc-name">Clay, Silt and Dust</span></span><span class="calc-price">RM 50</span></label>
          <label class="calc-item"><span><input type="checkbox" value="50"><span class="calc-name">Total Sulphur as SO3/SO4</span></span><span class="calc-price">RM 50</span></label>
          <label class="calc-item"><span><input type="checkbox" value="15"><span class="calc-name">Moisture 105°C</span></span><span class="calc-price">RM 15</span></label>
          <label class="calc-item"><span><input type="checkbox" value="20"><span class="calc-name">Specific Gravity (500 g)</span></span><span class="calc-price">RM 20</span></label>
          <label class="calc-item"><span><input type="checkbox" value="5"><span class="calc-name">pH</span></span><span class="calc-price">RM 5</span></label>
        </div>

        <div class="total-box" aria-live="polite">Jumlah: RM <span id="total">0.00</span></div>

        <div class="action-bar">
          <a href="#" class="btn btn-primary" id="homeBtn">Utama</a>
          <button type="button" id="clearForm" class="btn btn-ghost">Kosongkan</button>
        </div>
      </form>
    </article>

    <article id="contact">
      <h2 class="major">I- PAYMENT</h2>
      <p>Untuk bayaran secara dalam talian, sila gunakan portal rasmi iPayment Perbendaharaan Malaysia.</p>
      <p>
        <a class="btn btn-primary" href="https://ipayment.anm.gov.my/" target="_blank" rel="noopener">
          Buka I- PAYMENT
        </a>
      </p>
      <p class="calc-hint">Simpan bukti pembayaran. Resit portal mungkin diperlukan semasa pengambilan laporan.</p>
    </article>
  </div>

  <footer id="footer">
    <p class="copyright">
      <a href="mailto:makmalbptipoh@gmail.com">makmalbptipoh@gmail.com</a>
    </p>
  </footer>
</div>

<div id="bg"></div>

<!-- Skrip asal tema -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>

<!-- Kalkulator -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var form = document.getElementById('calcForm');
    if (!form) return;

    var checkboxes = form.querySelectorAll('input[type="checkbox"]');
    var totalEl = document.getElementById('total');
    var sampleInput = document.getElementById('sampleCount');
    var clearBtn = document.getElementById('clearForm');
    var homeBtn  = document.getElementById('homeBtn');

    function recalc() {
      var total = 0;
      for (var i = 0; i < checkboxes.length; i++) {
        var c = checkboxes[i];
        if (c.checked) total += parseFloat(c.value) || 0;
      }
      var samples = parseInt(sampleInput.value, 10);
      if (isNaN(samples) || samples < 1) samples = 1;
      sampleInput.value = samples;
      totalEl.textContent = (total * samples).toFixed(2);
    }

    for (var i = 0; i < checkboxes.length; i++) {
      checkboxes[i].addEventListener('change', recalc, false);
    }

    if (sampleInput) {
      sampleInput.addEventListener('input', recalc, false);
      sampleInput.addEventListener('change', recalc, false);
    }

    if (clearBtn) {
      clearBtn.addEventListener('click', function () {
        for (var i = 0; i < checkboxes.length; i++) {
          checkboxes[i].checked = false;
        }
        sampleInput.value = 1;
        recalc();
        form.scrollTop = 0;
      }, false);
    }

    if (homeBtn) {
      homeBtn.addEventListener('click', function (e) {
        if (e && e.preventDefault) e.preventDefault();
        window.location.hash = '';
        window.scrollTo(0, 0);
      }, false);
    }

    recalc();
  });
</script>
